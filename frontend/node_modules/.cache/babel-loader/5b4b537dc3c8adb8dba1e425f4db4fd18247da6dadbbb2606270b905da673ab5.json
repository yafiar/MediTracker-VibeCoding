{"ast":null,"code":"import axios from'axios';// Prefer environment variable, fallback to provided Render URL\nconst API_URL=process.env.REACT_APP_API_URL||'https://meditracker-backend-c0fn.onrender.com/api';const api=axios.create({baseURL:API_URL});// Add token to requests\napi.interceptors.request.use(config=>{const token=localStorage.getItem('token');if(token){config.headers.Authorization=\"Bearer \".concat(token);}return config;},error=>{return Promise.reject(error);});// Handle response errors\napi.interceptors.response.use(response=>response,error=>{var _error$response;if(((_error$response=error.response)===null||_error$response===void 0?void 0:_error$response.status)===401){localStorage.removeItem('token');localStorage.removeItem('userId');localStorage.removeItem('userName');// Only redirect if not already on public pages\nconst currentPath=window.location.pathname;if(currentPath!=='/login'&&currentPath!=='/register'){window.location.href='/login';}}return Promise.reject(error);});// Auth API\nexport const authAPI={register:data=>api.post('/auth/register',data),login:data=>api.post('/auth/login',data)};// Medicine API\nexport const medicineAPI={getAll:function(){let params=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};return api.get('/medicines',{params});},getById:id=>api.get(\"/medicines/\".concat(id)),create:formData=>api.post('/medicines',formData,{headers:{'Content-Type':'multipart/form-data'}}),update:(id,formData)=>api.put(\"/medicines/\".concat(id),formData,{headers:{'Content-Type':'multipart/form-data'}}),delete:id=>api.delete(\"/medicines/\".concat(id))};// Schedule API\nexport const scheduleAPI={getAll:()=>api.get('/schedules'),getByMedicine:medicineId=>api.get(\"/schedules/medicine/\".concat(medicineId)),create:data=>api.post('/schedules',data),update:(id,data)=>api.put(\"/schedules/\".concat(id),data),delete:id=>api.delete(\"/schedules/\".concat(id))};// Intake API\nexport const intakeAPI={getAll:()=>api.get('/intakes'),getTodayIntakes:()=>api.get('/intakes/today'),markAsTaken:data=>api.post('/intakes',data),delete:id=>api.delete(\"/intakes/\".concat(id))};// Notification API\nexport const notificationAPI={getAll:function(){let params=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};return api.get('/notifications',{params});},create:data=>api.post('/notifications',data),clearAll:()=>api.delete('/notifications/clear')};export default api;","map":{"version":3,"names":["axios","API_URL","process","env","REACT_APP_API_URL","api","create","baseURL","interceptors","request","use","config","token","localStorage","getItem","headers","Authorization","concat","error","Promise","reject","response","_error$response","status","removeItem","currentPath","window","location","pathname","href","authAPI","register","data","post","login","medicineAPI","getAll","params","arguments","length","undefined","get","getById","id","formData","update","put","delete","scheduleAPI","getByMedicine","medicineId","intakeAPI","getTodayIntakes","markAsTaken","notificationAPI","clearAll"],"sources":["C:/a_ITS/Semester 3/Kelas/PemWeb/MediTracker-VibeCoding/frontend/src/services/api.js"],"sourcesContent":["import axios from 'axios';\n\n// Prefer environment variable, fallback to provided Render URL\nconst API_URL = process.env.REACT_APP_API_URL || 'https://meditracker-backend-c0fn.onrender.com/api';\n\nconst api = axios.create({\n  baseURL: API_URL,\n});\n\n// Add token to requests\napi.interceptors.request.use(\n  (config) => {\n    const token = localStorage.getItem('token');\n    if (token) {\n      config.headers.Authorization = `Bearer ${token}`;\n    }\n    return config;\n  },\n  (error) => {\n    return Promise.reject(error);\n  }\n);\n\n// Handle response errors\napi.interceptors.response.use(\n  (response) => response,\n  (error) => {\n    if (error.response?.status === 401) {\n      localStorage.removeItem('token');\n      localStorage.removeItem('userId');\n      localStorage.removeItem('userName');\n      // Only redirect if not already on public pages\n      const currentPath = window.location.pathname;\n      if (currentPath !== '/login' && currentPath !== '/register') {\n        window.location.href = '/login';\n      }\n    }\n    return Promise.reject(error);\n  }\n);\n\n// Auth API\nexport const authAPI = {\n  register: (data) => api.post('/auth/register', data),\n  login: (data) => api.post('/auth/login', data),\n};\n\n// Medicine API\nexport const medicineAPI = {\n  getAll: (params = {}) => api.get('/medicines', { params }),\n  getById: (id) => api.get(`/medicines/${id}`),\n  create: (formData) => api.post('/medicines', formData, {\n    headers: { 'Content-Type': 'multipart/form-data' }\n  }),\n  update: (id, formData) => api.put(`/medicines/${id}`, formData, {\n    headers: { 'Content-Type': 'multipart/form-data' }\n  }),\n  delete: (id) => api.delete(`/medicines/${id}`),\n};\n\n// Schedule API\nexport const scheduleAPI = {\n  getAll: () => api.get('/schedules'),\n  getByMedicine: (medicineId) => api.get(`/schedules/medicine/${medicineId}`),\n  create: (data) => api.post('/schedules', data),\n  update: (id, data) => api.put(`/schedules/${id}`, data),\n  delete: (id) => api.delete(`/schedules/${id}`),\n};\n\n// Intake API\nexport const intakeAPI = {\n  getAll: () => api.get('/intakes'),\n  getTodayIntakes: () => api.get('/intakes/today'),\n  markAsTaken: (data) => api.post('/intakes', data),\n  delete: (id) => api.delete(`/intakes/${id}`),\n};\n\n// Notification API\nexport const notificationAPI = {\n  getAll: (params = {}) => api.get('/notifications', { params }),\n  create: (data) => api.post('/notifications', data),\n  clearAll: () => api.delete('/notifications/clear'),\n};\n\nexport default api;\n"],"mappings":"AAAA,MAAO,CAAAA,KAAK,KAAM,OAAO,CAEzB;AACA,KAAM,CAAAC,OAAO,CAAGC,OAAO,CAACC,GAAG,CAACC,iBAAiB,EAAI,mDAAmD,CAEpG,KAAM,CAAAC,GAAG,CAAGL,KAAK,CAACM,MAAM,CAAC,CACvBC,OAAO,CAAEN,OACX,CAAC,CAAC,CAEF;AACAI,GAAG,CAACG,YAAY,CAACC,OAAO,CAACC,GAAG,CACzBC,MAAM,EAAK,CACV,KAAM,CAAAC,KAAK,CAAGC,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC,CAC3C,GAAIF,KAAK,CAAE,CACTD,MAAM,CAACI,OAAO,CAACC,aAAa,WAAAC,MAAA,CAAaL,KAAK,CAAE,CAClD,CACA,MAAO,CAAAD,MAAM,CACf,CAAC,CACAO,KAAK,EAAK,CACT,MAAO,CAAAC,OAAO,CAACC,MAAM,CAACF,KAAK,CAAC,CAC9B,CACF,CAAC,CAED;AACAb,GAAG,CAACG,YAAY,CAACa,QAAQ,CAACX,GAAG,CAC1BW,QAAQ,EAAKA,QAAQ,CACrBH,KAAK,EAAK,KAAAI,eAAA,CACT,GAAI,EAAAA,eAAA,CAAAJ,KAAK,CAACG,QAAQ,UAAAC,eAAA,iBAAdA,eAAA,CAAgBC,MAAM,IAAK,GAAG,CAAE,CAClCV,YAAY,CAACW,UAAU,CAAC,OAAO,CAAC,CAChCX,YAAY,CAACW,UAAU,CAAC,QAAQ,CAAC,CACjCX,YAAY,CAACW,UAAU,CAAC,UAAU,CAAC,CACnC;AACA,KAAM,CAAAC,WAAW,CAAGC,MAAM,CAACC,QAAQ,CAACC,QAAQ,CAC5C,GAAIH,WAAW,GAAK,QAAQ,EAAIA,WAAW,GAAK,WAAW,CAAE,CAC3DC,MAAM,CAACC,QAAQ,CAACE,IAAI,CAAG,QAAQ,CACjC,CACF,CACA,MAAO,CAAAV,OAAO,CAACC,MAAM,CAACF,KAAK,CAAC,CAC9B,CACF,CAAC,CAED;AACA,MAAO,MAAM,CAAAY,OAAO,CAAG,CACrBC,QAAQ,CAAGC,IAAI,EAAK3B,GAAG,CAAC4B,IAAI,CAAC,gBAAgB,CAAED,IAAI,CAAC,CACpDE,KAAK,CAAGF,IAAI,EAAK3B,GAAG,CAAC4B,IAAI,CAAC,aAAa,CAAED,IAAI,CAC/C,CAAC,CAED;AACA,MAAO,MAAM,CAAAG,WAAW,CAAG,CACzBC,MAAM,CAAE,QAAAA,CAAA,KAAC,CAAAC,MAAM,CAAAC,SAAA,CAAAC,MAAA,IAAAD,SAAA,MAAAE,SAAA,CAAAF,SAAA,IAAG,CAAC,CAAC,OAAK,CAAAjC,GAAG,CAACoC,GAAG,CAAC,YAAY,CAAE,CAAEJ,MAAO,CAAC,CAAC,GAC1DK,OAAO,CAAGC,EAAE,EAAKtC,GAAG,CAACoC,GAAG,eAAAxB,MAAA,CAAe0B,EAAE,CAAE,CAAC,CAC5CrC,MAAM,CAAGsC,QAAQ,EAAKvC,GAAG,CAAC4B,IAAI,CAAC,YAAY,CAAEW,QAAQ,CAAE,CACrD7B,OAAO,CAAE,CAAE,cAAc,CAAE,qBAAsB,CACnD,CAAC,CAAC,CACF8B,MAAM,CAAEA,CAACF,EAAE,CAAEC,QAAQ,GAAKvC,GAAG,CAACyC,GAAG,eAAA7B,MAAA,CAAe0B,EAAE,EAAIC,QAAQ,CAAE,CAC9D7B,OAAO,CAAE,CAAE,cAAc,CAAE,qBAAsB,CACnD,CAAC,CAAC,CACFgC,MAAM,CAAGJ,EAAE,EAAKtC,GAAG,CAAC0C,MAAM,eAAA9B,MAAA,CAAe0B,EAAE,CAAE,CAC/C,CAAC,CAED;AACA,MAAO,MAAM,CAAAK,WAAW,CAAG,CACzBZ,MAAM,CAAEA,CAAA,GAAM/B,GAAG,CAACoC,GAAG,CAAC,YAAY,CAAC,CACnCQ,aAAa,CAAGC,UAAU,EAAK7C,GAAG,CAACoC,GAAG,wBAAAxB,MAAA,CAAwBiC,UAAU,CAAE,CAAC,CAC3E5C,MAAM,CAAG0B,IAAI,EAAK3B,GAAG,CAAC4B,IAAI,CAAC,YAAY,CAAED,IAAI,CAAC,CAC9Ca,MAAM,CAAEA,CAACF,EAAE,CAAEX,IAAI,GAAK3B,GAAG,CAACyC,GAAG,eAAA7B,MAAA,CAAe0B,EAAE,EAAIX,IAAI,CAAC,CACvDe,MAAM,CAAGJ,EAAE,EAAKtC,GAAG,CAAC0C,MAAM,eAAA9B,MAAA,CAAe0B,EAAE,CAAE,CAC/C,CAAC,CAED;AACA,MAAO,MAAM,CAAAQ,SAAS,CAAG,CACvBf,MAAM,CAAEA,CAAA,GAAM/B,GAAG,CAACoC,GAAG,CAAC,UAAU,CAAC,CACjCW,eAAe,CAAEA,CAAA,GAAM/C,GAAG,CAACoC,GAAG,CAAC,gBAAgB,CAAC,CAChDY,WAAW,CAAGrB,IAAI,EAAK3B,GAAG,CAAC4B,IAAI,CAAC,UAAU,CAAED,IAAI,CAAC,CACjDe,MAAM,CAAGJ,EAAE,EAAKtC,GAAG,CAAC0C,MAAM,aAAA9B,MAAA,CAAa0B,EAAE,CAAE,CAC7C,CAAC,CAED;AACA,MAAO,MAAM,CAAAW,eAAe,CAAG,CAC7BlB,MAAM,CAAE,QAAAA,CAAA,KAAC,CAAAC,MAAM,CAAAC,SAAA,CAAAC,MAAA,IAAAD,SAAA,MAAAE,SAAA,CAAAF,SAAA,IAAG,CAAC,CAAC,OAAK,CAAAjC,GAAG,CAACoC,GAAG,CAAC,gBAAgB,CAAE,CAAEJ,MAAO,CAAC,CAAC,GAC9D/B,MAAM,CAAG0B,IAAI,EAAK3B,GAAG,CAAC4B,IAAI,CAAC,gBAAgB,CAAED,IAAI,CAAC,CAClDuB,QAAQ,CAAEA,CAAA,GAAMlD,GAAG,CAAC0C,MAAM,CAAC,sBAAsB,CACnD,CAAC,CAED,cAAe,CAAA1C,GAAG","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}