{"ast":null,"code":"import React,{useState,useRef,useEffect,useCallback}from'react';import'./SortSelect.css';// Generic accessible custom dropdown select\n// Props: value, onChange, options [{value,label}], placeholder\nimport{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export default function SortSelect(_ref){let{value,onChange,options,placeholder='Select',ariaLabel='Sort select'}=_ref;const[open,setOpen]=useState(false);const[focusIndex,setFocusIndex]=useState(-1);const wrapperRef=useRef(null);const listRef=useRef(null);const current=options.find(o=>o.value===value);const close=useCallback(()=>{setOpen(false);setFocusIndex(-1);},[]);useEffect(()=>{function handleClickOutside(e){if(wrapperRef.current&&!wrapperRef.current.contains(e.target)){close();}}document.addEventListener('mousedown',handleClickOutside);return()=>document.removeEventListener('mousedown',handleClickOutside);},[close]);useEffect(()=>{if(open&&listRef.current){// Focus selected item or first\nconst idx=options.findIndex(o=>o.value===value);setFocusIndex(idx>=0?idx:0);}},[open,value,options]);const commit=opt=>{onChange&&onChange(opt.value);close();};const onKeyDown=e=>{if(!open){if(['ArrowDown','ArrowUp','Enter','Space'].includes(e.code)||['ArrowDown','ArrowUp'].includes(e.key)){e.preventDefault();setOpen(true);}return;}switch(e.key){case'Escape':e.preventDefault();close();break;case'ArrowDown':e.preventDefault();setFocusIndex(i=>Math.min(options.length-1,i+1));break;case'ArrowUp':e.preventDefault();setFocusIndex(i=>Math.max(0,i-1));break;case'Enter':case' ':// space\ne.preventDefault();if(focusIndex>=0&&options[focusIndex])commit(options[focusIndex]);break;default:break;}};return/*#__PURE__*/_jsxs(\"div\",{className:\"ss-wrapper \".concat(open?'open':''),ref:wrapperRef,onKeyDown:onKeyDown,children:[/*#__PURE__*/_jsxs(\"button\",{type:\"button\",className:\"ss-trigger\",\"aria-haspopup\":\"listbox\",\"aria-expanded\":open,\"aria-label\":ariaLabel,onClick:()=>setOpen(o=>!o),children:[/*#__PURE__*/_jsx(\"span\",{className:\"ss-value\",children:current?current.label:placeholder}),/*#__PURE__*/_jsx(\"span\",{className:\"ss-caret\",\"aria-hidden\":\"true\"})]}),open&&/*#__PURE__*/_jsx(\"ul\",{className:\"ss-menu\",role:\"listbox\",ref:listRef,children:options.map((opt,idx)=>{const selected=opt.value===value;const focused=idx===focusIndex;return/*#__PURE__*/_jsx(\"li\",{role:\"option\",\"aria-selected\":selected,tabIndex:-1,className:\"ss-item \".concat(selected?'selected':'',\" \").concat(focused?'focused':''),onMouseEnter:()=>setFocusIndex(idx),onMouseDown:e=>{e.preventDefault();commit(opt);},children:opt.label},opt.value);})})]});}","map":{"version":3,"names":["React","useState","useRef","useEffect","useCallback","jsx","_jsx","jsxs","_jsxs","SortSelect","_ref","value","onChange","options","placeholder","ariaLabel","open","setOpen","focusIndex","setFocusIndex","wrapperRef","listRef","current","find","o","close","handleClickOutside","e","contains","target","document","addEventListener","removeEventListener","idx","findIndex","commit","opt","onKeyDown","includes","code","key","preventDefault","i","Math","min","length","max","className","concat","ref","children","type","onClick","label","role","map","selected","focused","tabIndex","onMouseEnter","onMouseDown"],"sources":["C:/a_ITS/Semester 3/Kelas/PemWeb/MediTracker-VibeCoding/frontend/src/components/SortSelect.js"],"sourcesContent":["import React, { useState, useRef, useEffect, useCallback } from 'react';\r\nimport './SortSelect.css';\r\n\r\n// Generic accessible custom dropdown select\r\n// Props: value, onChange, options [{value,label}], placeholder\r\nexport default function SortSelect({ value, onChange, options, placeholder = 'Select', ariaLabel = 'Sort select' }) {\r\n  const [open, setOpen] = useState(false);\r\n  const [focusIndex, setFocusIndex] = useState(-1);\r\n  const wrapperRef = useRef(null);\r\n  const listRef = useRef(null);\r\n\r\n  const current = options.find(o => o.value === value);\r\n\r\n  const close = useCallback(() => {\r\n    setOpen(false);\r\n    setFocusIndex(-1);\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    function handleClickOutside(e) {\r\n      if (wrapperRef.current && !wrapperRef.current.contains(e.target)) {\r\n        close();\r\n      }\r\n    }\r\n    document.addEventListener('mousedown', handleClickOutside);\r\n    return () => document.removeEventListener('mousedown', handleClickOutside);\r\n  }, [close]);\r\n\r\n  useEffect(() => {\r\n    if (open && listRef.current) {\r\n      // Focus selected item or first\r\n      const idx = options.findIndex(o => o.value === value);\r\n      setFocusIndex(idx >= 0 ? idx : 0);\r\n    }\r\n  }, [open, value, options]);\r\n\r\n  const commit = (opt) => {\r\n    onChange && onChange(opt.value);\r\n    close();\r\n  };\r\n\r\n  const onKeyDown = (e) => {\r\n    if (!open) {\r\n      if (['ArrowDown', 'ArrowUp', 'Enter', 'Space'].includes(e.code) || ['ArrowDown','ArrowUp'].includes(e.key)) {\r\n        e.preventDefault();\r\n        setOpen(true);\r\n      }\r\n      return;\r\n    }\r\n    switch (e.key) {\r\n      case 'Escape':\r\n        e.preventDefault();\r\n        close();\r\n        break;\r\n      case 'ArrowDown':\r\n        e.preventDefault();\r\n        setFocusIndex(i => Math.min(options.length - 1, i + 1));\r\n        break;\r\n      case 'ArrowUp':\r\n        e.preventDefault();\r\n        setFocusIndex(i => Math.max(0, i - 1));\r\n        break;\r\n      case 'Enter':\r\n      case ' ': // space\r\n        e.preventDefault();\r\n        if (focusIndex >= 0 && options[focusIndex]) commit(options[focusIndex]);\r\n        break;\r\n      default:\r\n        break;\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className={`ss-wrapper ${open ? 'open' : ''}`} ref={wrapperRef} onKeyDown={onKeyDown}>\r\n      <button\r\n        type=\"button\"\r\n        className=\"ss-trigger\"\r\n        aria-haspopup=\"listbox\"\r\n        aria-expanded={open}\r\n        aria-label={ariaLabel}\r\n        onClick={() => setOpen(o => !o)}\r\n      >\r\n        <span className=\"ss-value\">{current ? current.label : placeholder}</span>\r\n        <span className=\"ss-caret\" aria-hidden=\"true\" />\r\n      </button>\r\n      {open && (\r\n        <ul className=\"ss-menu\" role=\"listbox\" ref={listRef}>\r\n          {options.map((opt, idx) => {\r\n            const selected = opt.value === value;\r\n            const focused = idx === focusIndex;\r\n            return (\r\n              <li\r\n                key={opt.value}\r\n                role=\"option\"\r\n                aria-selected={selected}\r\n                tabIndex={-1}\r\n                className={`ss-item ${selected ? 'selected' : ''} ${focused ? 'focused' : ''}`}\r\n                onMouseEnter={() => setFocusIndex(idx)}\r\n                onMouseDown={(e) => { e.preventDefault(); commit(opt); }}\r\n              >\r\n                {opt.label}\r\n              </li>\r\n            );\r\n          })}\r\n        </ul>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}